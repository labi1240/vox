!function(e){"function"==typeof define&&define.amd?define("share",e):e()}(function(){"use strict";window.render_share_dialog=()=>{Array.from(document.querySelectorAll(".ts-share-post")).forEach(e=>{if(!e.__vue_app__){let i=JSON.parse(e.dataset.config);var t=Vue.createApp({el:e,template:e.innerHTML,mixins:[Voxel.mixins.base],data(){return{active:!1,loading:!0,list:null}},methods:{open(){null===this.list&&jQuery.get(Voxel_Config.ajax_url+"&action=share.get_networks",{title:i.title,link:i.link,excerpt:i.excerpt}).always(e=>{this.loading=!1,e.success?this.list=e.data:(Voxel.alert(e.message||Voxel_Config.l10n.ajaxError,"error"),this.active=!1),this.$nextTick(()=>this.$refs.popup?.reposition())}),this.active=!0},shouldShow(e){return"native-share"!==e.type||!!navigator.share},share(e){var t,o;"copy-link"===e.type?(Voxel.copy(i.link),this.active=!1):"native-share"===e.type?(Voxel.share({title:i.title,url:i.url}),this.active=!1):(t=window.top.outerHeight/2+window.top.screenY-240,o=window.top.outerWidth/2+window.top.screenX-320,window.open(e.link,window,"toolbar=no,location=no,status=no,menubar=no,scrollbars=yes,resizable=yes,"+(`width=640,height=480,top=${t},left=`+o)))}}});t.component("popup",Voxel.components.popup),t.mount(e)}})},window.render_share_dialog(),jQuery(document).on("voxel:markup-update",window.render_share_dialog)});
