!function(e){"function"==typeof define&&define.amd?define("commons",e):e()}(function(){"use strict";window.Voxel={mixins:{},components:{},Maps:{await(e){var t;Voxel.Maps.Loaded?e():(document.addEventListener("maps:loaded",()=>e()),(t=Voxel_Config[Voxel_Config.maps.provider]?.handle)&&(t=document.getElementById(t))&&(t.src=t.dataset.src))}},helpers:{getParent(e,t){for(var o=null,r=e.$parent;r&&!o;)r.$options.name===t&&(o=r),r=r.$parent;return o},dateFormatYmd(e){return[e.getFullYear(),("0"+(e.getMonth()+1)).slice(-2),("0"+e.getDate()).slice(-2)].join("-")},dateTimeFormat(e){return e.toLocaleString(void 0,{dateStyle:"medium",timeStyle:"short"})},dateFormat(e){return e.toLocaleString(void 0,{dateStyle:"medium"})},timeFormat(e){return e.toLocaleString(void 0,{timeStyle:"short"})},currencyFormat(t,o=Voxel_Config.currency){try{return new Intl.NumberFormat(Voxel_Config.locale.replace("_","-"),{style:"currency",currency:o}).format(t)}catch(e){return o+" "+t}},debounce(t,o=200,r=null){let a;return(...e)=>{clearTimeout(a),"function"==typeof r&&(e=r(e)),a=setTimeout(()=>{t.apply(this,e)},o)}},viewportPercentage(e){var t,o,e=e.getBoundingClientRect(),r=window.innerHeight;return e.top>=r||e.bottom<=0?0:e.top<0&&e.bottom>r?1:(t=e.top<0?Math.abs(e.top):0,o=e.bottom>r?e.bottom-r:0,(e.height-t-o)/r)},sequentialId(){return this.count||(this.count=1),this.count++}},alert(e,t="info",o=[],r=7500){var t=document.getElementById("vx-alert-tpl").textContent.replace("{type}",t).replace("{message}",e),a=jQuery(t).hide();Array.isArray(o)&&o.length&&o.reverse().forEach(e=>{e=jQuery('<a class="ts-btn ts-btn-4">').attr("href",e.link).html(e.label);a.find(".alert-actions").prepend(e)}),a.find(".close-alert").on("click",e=>{e.preventDefault(),a.fadeOut(100,()=>a.remove())}),"number"==typeof r&&0<r&&setTimeout(()=>a.fadeOut(100,()=>a.remove()),r),jQuery("#vx-alert").html(a),a.fadeIn(100)},authRequired(e=null){null===e&&(e=Voxel_Config.l10n.accountRequired),Voxel.alert(e,"info",[{link:Voxel_Config.login_url,label:Voxel_Config.l10n.login},{link:Voxel_Config.register_url,label:Voxel_Config.l10n.register}],7500)},requireAuth(e){Voxel_Config.is_logged_in||(e.preventDefault(),Voxel.authRequired())},getSearchParam(e){return new URL(window.location).searchParams.get(e)},setSearchParam(e,t){var o=new URL(window.location);o.searchParams.set(e,t),window.history.replaceState(null,null,o)},localStore(t,o,e){try{localStorage.setItem(t,o)}catch(e){localStorage.removeItem(t);try{Voxel.cacheDB.set(t,o)}catch(e){}}o={};try{var r=JSON.parse(localStorage.getItem("voxel:ttls"));"object"==typeof r&&null!==r&&(o=r)}catch(e){}o[t]={start:(new Date).getTime(),ttl:e},localStorage.setItem("voxel:ttls",JSON.stringify(o))},cacheDB:{do(r){var a=indexedDB.open("voxel",1);a.onupgradeneeded=function(){a.result.createObjectStore("cache",{keyPath:"key"})},a.onsuccess=function(){var e=a.result,t=e.transaction("cache","readwrite"),o=t.objectStore("cache");r(o),t.oncomplete=()=>e.close()}},get(o,r){Voxel.cacheDB.do(e=>{let t=e.get(o);t.onsuccess=()=>{r(t.result?.value)}})},set(t,o){Voxel.cacheDB.do(e=>{e.put({key:t,value:o})})},delete(t){Voxel.cacheDB.do(e=>{e.delete(t)})}},deleteSearchParam(e){var t=new URL(window.location);t.searchParams.delete(e),window.history.replaceState(null,null,t)},async share(e){try{await navigator.share(e)}catch(e){}},copy(e){navigator.clipboard.writeText(e).then(()=>Voxel.alert(Voxel_Config.l10n.copied,"info",null,1500))},loadTab(e,a,l){e.preventDefault();let n=document.querySelector(`.ts-template-tabs-${CSS.escape(a)} .ts-template-tab[data-tab="${CSS.escape(l)}"]`);if(n){let e=n.closest(".ts-template-tabs"),t=JSON.parse(e.dataset.config),o=(jQuery(`.ts-tab-triggers-${CSS.escape(a)} .menu-item`).removeClass("current-menu-item"),jQuery(`.ts-tab-triggers-${CSS.escape(a)} .menu-item[data-tab="${CSS.escape(l)}"]`)),r=(o.addClass("current-menu-item"),e=>{jQuery(e).siblings().removeClass("active-tab"),e.classList.add("active-tab"),t.default_tab===e.dataset.tab?Voxel.deleteSearchParam(t.url_key):Voxel.setSearchParam(t.url_key,e.dataset.tab)});n.classList.contains("rendered")?r(n):(e.classList.add("vx-pending"),o.addClass("vx-inert"),jQuery.get(Voxel_Config.ajax_url,{action:"tabs.load",post_id:t.post_id,widget_id:t.widget_id,template_id:t.template_id,tab:l}).always(t=>{if(e.classList.remove("vx-pending"),o.removeClass("vx-inert"),!1===t.success)Voxel.alert(t.message||Voxel_Config.l10n.ajaxError,"error");else{let e=jQuery('<div class="response-wrapper">'+t+"</div>"),o=[];e.find('link[rel="stylesheet"]').each((e,t)=>{t.id&&document.querySelector("#"+CSS.escape(t.id))?t.remove():o.push(new Promise(e=>{t.onload=e}))}),e.find('script[type="text/javascript"]').each((e,t)=>{t.id&&document.querySelector("#"+CSS.escape(t.id))&&t.remove()}),(e=e.children()).appendTo("#vx-markup-cache"),Promise.all(o).then(()=>{requestAnimationFrame(()=>{e.appendTo(jQuery(n)),n.classList.add("rendered"),r(n),jQuery(document).trigger("voxel:markup-update")})})}}))}},scrollTo(e){e&&window.scrollTo({top:e.getBoundingClientRect().top+window.pageYOffset,behavior:"smooth"})},getCookie(t){return document.cookie.split("; ").find(e=>e.startsWith(t+"="))?.split("=")[1]}},window.Voxel.mixins.base={data(){return{widget_id:null,post_id:null}},mounted(){this.widget_id=this.$root.$options.el.closest(".elementor-element").dataset.id,this.post_id=this.$root.$options.el.closest(".elementor").dataset.elementorId},computed:{$w(){return window}}},window.Voxel.mixins.blurable={props:{preventBlur:{type:String,default:""}},mounted(){requestAnimationFrame(()=>{document.addEventListener("mousedown",this._click_outside_handler)})},unmounted(){document.removeEventListener("mousedown",this._click_outside_handler)},methods:{_click_outside_handler(e){var t=".triggers-blur";this.preventBlur.length&&(t+=","+this.preventBlur),e.target.closest(t)||this.$emit("blur")}}},window.Voxel.mixins.popup={data(){return{styles:""}},mounted(){this.reposition(),window.addEventListener("scroll",this.reposition,!0),requestAnimationFrame(()=>{var e=this.$el.querySelector(".autofocus");e&&e.focus()})},methods:{reposition(){if(this.$refs["popup-box"]){let r=this.target;if(r="string"==typeof r?document.querySelector(r):r){var a=r.getBoundingClientRect(),l=this.$refs["popup-box"],n=jQuery(r).offset(),s=jQuery(r).outerWidth();let e=Math.max(a.width,parseFloat(window.getComputedStyle(l).minWidth));var l=jQuery("body").innerWidth(),s=Math.max(l-n.left-s,0),i=n.left+e>l-15?l-e-15:n.left,l=s+e>l-15?l-e-15:s;let t="left: "+i+"px;",o=("rtl"===document.documentElement.getAttribute("dir")&&(t="right: "+l+"px;"),`top: ${n.top+a.height}px;`);s=window.innerHeight,i=this.$refs.popup.getBoundingClientRect();a.bottom+i.height>s&&0<=a.top-i.height&&(o=`top: ${n.top-i.height}px;`),requestAnimationFrame(()=>{this.styles=`
						${o}
						${t}
						width: ${e}px;
						position: absolute;
					`})}}else window.removeEventListener("scroll",this.reposition,!0)}}},window.Voxel.components.popup={template:"#voxel-popup-template",mixins:[Voxel.mixins.blurable,Voxel.mixins.popup],props:{onBlur:Function,target:[Object,String],saveLabel:String,clearLabel:String,controllerClass:String,showSave:{type:Boolean,default:!0},showClear:{type:Boolean,default:!0},showClearMobile:{type:Boolean,default:!0},showClose:{type:Boolean,default:!1}}},window.Voxel.components.formGroup={template:"#voxel-form-group-template",props:{popupKey:String,saveLabel:String,clearLabel:String,wrapperClass:String,controllerClass:String,showSave:{type:Boolean,default:!0},showClear:{type:Boolean,default:!0},showClearMobile:{type:Boolean,default:!0},showClose:{type:Boolean,default:!1},defaultClass:{type:Boolean,default:!0},preventBlur:{type:String,default:""},tag:{type:String,default:"div"}},components:{"form-popup":window.Voxel.components.popup},data(){return{popupTarget:null}},mounted(){this.popupTarget=this.$el.querySelector(".ts-popup-target")||this.$el},methods:{blur(){this.$refs.popup.$emit("blur")},onPopupBlur(){this.$root.activePopup=null,this.$emit("blur",this)}}},window.render_static_popups=()=>{Array.from(document.querySelectorAll(".ts-popup-component")).forEach(e=>{if(!e.__vue_app__){let t=e.classList.contains("ts-trigger-on-hover");var o=Vue.createApp({template:e.innerHTML,data(){return{active:!1,screen:"main",widget_id:null,post_id:null,slide_from:"left",window:window,navigator:window.navigator,Voxel:window.Voxel}},mounted(){this.widget_id=this.$el.parentElement.closest(".elementor-element").dataset.id,this.post_id=this.$el.parentElement.closest(".elementor").dataset.elementorId,t?(this.$refs.target.addEventListener("mouseover",e=>{this.active=!0}),this.$refs.target.addEventListener("mouseleave",e=>{setTimeout(()=>{var t=document.querySelector("body :hover"),o=this.$refs.popup?.$refs.popup?.$el;if(t&&o){if(t===o)return;let e=t;for(;e=e.parentElement;)if(e===o)return}this.active=!1},40)})):this.$refs.target.onclick=e=>{e.preventDefault(),this.active=!0}},methods:{beforeEnter(e){setTimeout(()=>e.closest(".min-scroll").scrollTop=e.dataset.scrollTop||0,100)},beforeLeave(e){e.dataset.scrollTop=e.closest(".min-scroll").scrollTop}}});o.component("form-popup",{template:`
				<div class="elementor vx-popup" :class="'elementor-'+$root.post_id">
					<div class="ts-popup-root elementor-element" :class="'elementor-element-'+$root.widget_id+'-wrap'" v-cloak>
						<div class="ts-form elementor-element" :style="styles" ref="popup" :class="'elementor-element-'+$root.widget_id">
							<div class="ts-field-popup-container">
								<div class="ts-field-popup triggers-blur" ref="popup-box">
									<div class="ts-popup-content-wrapper min-scroll">
										<slot></slot>
									</div>
									<slot name="footer"></slot>
								</div>
							</div>
						</div>
					</div>
				</div>
			`,mixins:[Voxel.mixins.blurable,Voxel.mixins.popup],props:["onBlur","target"],mounted(){this.$el.addEventListener("mouseleave",e=>{t&&setTimeout(()=>{var t=Array.from(document.querySelectorAll("body :hover")).pop(),o=this.$root.$refs.target;if(t&&o){if(t===o)return;let e=t;for(;e=e.parentElement;)if(e===o)return}this.$root.active=!1},40)})}}),o.component("popup",{props:["wrapper"],template:`
				<teleport to="body">
				 	<transition name="form-popup">
				 		<form-popup v-if="$root.active" ref="popup" @blur="$root.active = false" :target="$root.$refs.target" :class="wrapper">
				 			<template #default>
								<slot></slot>
				 			</template>
				 			<template #footer>
								<slot name="footer"></slot>
				 			</template>
				 		</form-popup>
				 	</transition>
				</teleport>
			`,methods:{blur(){this.$refs.popup.$emit("blur")}}}),o.mount(e)}})},window.render_static_popups(),jQuery(document).on("voxel:markup-update",window.render_static_popups);let t=r=>{r(".ts-expand-hours:not(.vx-event-expand)").each((e,t)=>{t.classList.add("vx-event-expand"),r(t).on("click",e=>{e.preventDefault(),r(t).parents(".ts-work-hours").toggleClass("active")})}),r(".ts-action-follow:not(.vx-event-follow)").each((e,t)=>{t.classList.add("vx-event-follow"),r(t).on("click",o=>{if(o.preventDefault(),!Voxel_Config.is_logged_in)return Voxel.authRequired();o.currentTarget.classList.add("vx-pending"),jQuery.get(o.currentTarget.href).always(e=>{var t;e.success?o.currentTarget.classList.toggle("active"):(t=Voxel_Config.l10n.ajaxError,e=e.message||t,Voxel.alert(e,"error")),o.currentTarget.classList.remove("vx-pending")})})});let a=(t,o)=>{t=t.querySelector(".post-feed-grid");if(t){var r=t.querySelector(".ts-preview");if(r){let e=r.scrollWidth;t.offsetWidth+Math.abs(t.scrollLeft)+10>=t.scrollWidth&&(e=-t.scrollWidth),"prev"===o&&(e=-r.scrollWidth,Math.abs(t.scrollLeft)<=10)&&(e=t.scrollWidth),t.scrollBy({left:Voxel_Config.is_rtl?-e:e,behavior:"smooth"})}}};r(".post-feed-nav a:not(.vx-event-nav)").each((e,t)=>{t.classList.add("vx-event-nav");let o=t.closest(".elementor-widget-container");o&&r(t).on("click",e=>{e.preventDefault();let t=e.currentTarget.classList.contains("ts-prev-page")?"prev":"next";Voxel_Config.is_rtl&&(t="next"===t?"prev":"next"),a(o,t)})}),r(".post-feed-grid.ts-feed-nowrap:not(.vx-event-autoslide)").addClass("vx-event-autoslide").each((e,t)=>{let o=t.closest(".elementor-widget-container");o&&(t=parseInt(t.dataset.autoSlide,10),isNaN(t)||t<=20||setInterval(()=>{Array.from(document.querySelectorAll(":hover")).includes(o)||a(o,"next")},t))}),r(".post-feed-grid:not(.vx-event-scroll)").addClass("vx-event-scroll").each((e,t)=>{var o=t.closest(".elementor-widget-container");o&&t.scrollWidth>t.clientWidth&&(o.querySelector(".post-feed-nav .ts-prev-page")?.classList.remove("disabled"),o.querySelector(".post-feed-nav .ts-next-page")?.classList.remove("disabled"))}),r(".ts-plan-tabs a:not(.vx-event-plans)").each((e,t)=>{t.classList.add("vx-event-plans"),r(t).on("click",e=>{e.preventDefault();var t=e.target.dataset.id,e=r(e.target.parentElement),e=(e.addClass("ts-tab-active").siblings().removeClass("ts-tab-active"),e.parent().next());e.find(`.ts-plan-container:not([data-group="${t}"])`).addClass("hidden"),e.find(`.ts-plan-container[data-group="${t}"]`).removeClass("hidden")})}),r("a[vx-action]:not(.vx-event-action)").each((e,t)=>{t.classList.add("vx-event-action"),r(t).on("click",o=>{var e;o.preventDefault(),o.currentTarget.dataset.confirm&&!confirm(o.currentTarget.dataset.confirm)||(o.currentTarget.classList.add("vx-pending"),e=o.currentTarget.href,jQuery.get(e,e=>{if(e.success){if(e.message&&Voxel.alert(e.message,e.message_type||"success"),e.redirect_to)return"(reload)"===e.redirect_to?location.reload():window.location.href=e.redirect_to,void o.currentTarget.classList.remove("vx-pending")}else{var t=Voxel_Config.l10n.ajaxError,e=e.message||t;Voxel.alert(e,"error")}o.currentTarget.classList.remove("vx-pending")}).fail(()=>{var e=Voxel_Config.l10n.ajaxError,e=response.message||e;Voxel.alert(e,"error"),o.currentTarget.classList.remove("vx-pending")}))})}),r(".ts-nav-menu.ts-custom-links:not(.vx-event-links)").each((e,t)=>{t.classList.add("vx-event-links"),r(t).each((e,t)=>{let a={};r(t).find('.ts-item-link[href^="#"]').each((e,t)=>{try{var o=t.attributes.href.value,r=document.querySelector(o);r&&(a[o]={section:r,toggle:t})}catch(e){}}),Object.values(a).length&&(t=()=>{let t=[];Object.values(a).forEach(e=>{t.push({target:e,pct:Voxel.helpers.viewportPercentage(e.section)})}),t.sort((e,t)=>t.pct-e.pct);var e=t[0];e&&e.pct&&r(e.target.toggle).parent().addClass("current-menu-item").siblings().removeClass("current-menu-item")},r(window).on("scroll",Voxel.helpers.debounce(t,100)),t())})}),r(".vx-guest-plan:not(.vx-event-plan)").each((e,t)=>{t.classList.add("vx-event-plan"),r(t).on("click",e=>{Voxel.setSearchParam("checkout.plan",btoa(e.currentTarget.dataset.priceKey))})})};jQuery(e=>t(e)),jQuery(document).on("voxel:markup-update",()=>t(jQuery)),jQuery(e=>{if(jQuery(document).on("voxel:markup-update",()=>{jQuery(".elementor-widget-image-carousel").each((e,t)=>{elementorFrontend.elementsHandler.runReadyTrigger(t)})}),document.querySelector("body.logged-in .ts-plans-list.allow-autoselect"))try{var t,o,r;Voxel.getSearchParam("checkout.plan")?(t=atob(Voxel.getSearchParam("checkout.plan")),document.querySelector(`.vx-pick-plan[data-price-key="${CSS.escape(t)}"]`)?.click(),Voxel.deleteSearchParam("checkout.plan")):Voxel.getSearchParam("redirect_to")&&(o=new URL(Voxel.getSearchParam("redirect_to"))).searchParams.get("checkout.plan")&&(r=atob(o.searchParams.get("checkout.plan")),document.querySelector(`.vx-pick-plan[data-price-key="${CSS.escape(r)}"]`)?.click())}catch(e){}setTimeout(()=>{try{let o=JSON.parse(localStorage.getItem("voxel:ttls"));"object"==typeof o&&null!==o&&(Object.keys(o).forEach(e=>{var t=o[e];((new Date).getTime()-t.start)/1e3>t.ttl&&(localStorage.removeItem(e),Voxel.cacheDB.delete(e),delete o[e])}),localStorage.setItem("voxel:ttls",JSON.stringify(o)))}catch(e){}},2e3),document.querySelector(".ts-map")&&Voxel.Maps.await(()=>{})})});
