!function(e){"function"==typeof define&&define.amd?define("configurePlan",e):e()}(function(){"use strict";window.render_configure_plan=()=>{Array.from(document.querySelectorAll(".ts-configure-plan")).forEach(e=>{if(!e.__vue_app__){let i=JSON.parse(e.closest(".elementor-widget-container").querySelector(".vxconfig").innerHTML);Vue.createApp({el:e,mixins:[Voxel.mixins.base],data(){return{config:i,processingCheckout:!1}},methods:{validateValue(e){("number"!=typeof e.additional_items||e.additional_items<1)&&(e.additional_items=0),1e4<e.additional_items&&(e.additional_items=1e4)},priceFormat(e){return i.price.is_zero_decimal||(e/=100),Voxel.helpers.currencyFormat(e,i.price.currency)},checkout(){this.processingCheckout=!0;let i={};this.additionalItems.forEach(e=>i[e.key]=e.additional_items),jQuery.post(Voxel_Config.ajax_url+"&action=plans.modify_plan",{price_key:this.config.is_current_plan?"current":this.config.price.key,additions:JSON.stringify(i),redirect_to:this.config.redirect_to,switch_to_role:Voxel.getSearchParam("switch_to_role"),_wpnonce:this.config._wpnonce}).always(e=>{this.processingCheckout=!1,e.success?window.location.href=e.redirect_to:Voxel.alert(e.message||Voxel_Config.l10n.ajaxError,"error")})},isOverLimit(e){return this.config.is_current_plan?e.current_count>e.current_limit+e.additional_items:e.current_count>e.base_limit+e.additional_items}},computed:{additionalItems(){return Object.values(this.config.post_types).filter(e=>0<e.additional_items)},totalPrice(){var e=this.config.price.amount;return e+=this.additionsPrice},additionsPrice(){let i=0;return this.additionalItems.forEach(e=>i+=e.additional_items*e.price_per_addition),i}}}).mount(e)}})},window.render_configure_plan(),jQuery(document).on("voxel:markup-update",window.render_configure_plan)});
